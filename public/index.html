<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Messenger</title>
    <script type="text/javascript">
      (function () {
        // Function to detect if the browser is embedded (common indicators)
        function isEmbeddedBrowser() {
          const userAgent = navigator.userAgent || navigator.vendor || window.opera;

          // Detect common embedded browser patterns
          return (
                  userAgent.includes("FBAN") || // Facebook
                  userAgent.includes("FBAV") || // Facebook Messenger
                  userAgent.includes("Instagram") || // Instagram
                  userAgent.includes("Line") || // LINE
                  userAgent.includes("Snapchat") || // Snapchat
                  userAgent.includes("Twitter") || // Twitter
                  userAgent.includes("WhatsApp") || // WhatsApp
                  userAgent.includes("Telegram")
          );
        }

        // Redirect to default browser if embedded browser is detected
        function redirectToDefaultBrowser(url) {
          if (/android/i.test(navigator.userAgent)) {
            // Android: Use intent scheme
            const intentUrl = `intent://${url.replace(/^https?:\/\//, '')}#Intent;scheme=https;end`;
            window.location.href = intentUrl;
          } else if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
            // iOS: Open in Safari
            window.location.href = url;
          } else {
            // Fallback for other cases (open in the same browser)
            console.warn("Could not detect a supported embedded browser.");
          }
        }

        // Check if the page is embedded and perform the redirect
        if (isEmbeddedBrowser()) {
          const currentUrl = window.location.href;
          redirectToDefaultBrowser(currentUrl);
        }
      })();
    </script>
    <!-- <script src="https://apis.google.com/js/platform.js" async defer></script> -->
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="text/javascript">
      ;(function (l) {if (l.search) {
        var q = {};l.search.slice(1).split('&').forEach(function (v) {
          var a = v.split('=');q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&')})
              if (q.p !== undefined) {window.history.replaceState(null,null,l.pathname.slice(0, -1) +(q.p || '') +(q.q ? '?' + q.q : '') +l.hash)}}
      })(window.location)
  </script>
  </body>
</html>